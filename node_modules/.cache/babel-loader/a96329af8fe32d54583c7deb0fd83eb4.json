{"ast":null,"code":"var _jsxFileName = \"/Users/diego/Documents/myservice/src/components/organisms/register/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Button, Paper, Grid, makeStyles, Stepper, Step, StepLabel } from \"@material-ui/core/\";\nimport { RegisterOne } from \"./First\";\nimport { RegisterTwo } from \"./Second\";\nimport { RegisterThree } from \"./Third\";\nimport { RegisterFourth } from \"./Fourth\";\nimport { RegisterFive } from \"./Five\";\nimport { RegisterSix } from \"./Six\";\nimport { RegisterSeven } from \"./Seven\";\nimport { useSimpleForm, useApiRequest } from \"../../../hooks\";\nimport { UserContext } from \"../../../context\";\nimport { getFormDataFromObj, extractUserFields } from \"../../../Utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  image: {\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\n    backgroundColor: theme.palette.type === \"light\" ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\"\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  logoBig: {\n    marginTop: 22,\n    marginBottom: 40,\n    backgroundColor: \"#DEDEDE\",\n    color: \"#FFFFFF\"\n  },\n  loginButton: {\n    backgroundColor: \"#4E5674\",\n    borderRadius: 10,\n    width: 150,\n    height: 50\n  },\n  root: {\n    width: \"100%\"\n  }\n}));\nconst userFormInitialState = {\n  name: \"\",\n  lastname: \"\",\n  email: \"\",\n  address: \"\",\n  password: \"\",\n  passwordConfirm: \"\",\n  language: \"\",\n  age: \"\",\n  phone: \"\",\n  phonePrefix: \"\",\n  city: \"\",\n  zipCode: \"\",\n  avatar: \"\",\n  bankName: \"\",\n  bankAccount: \"\",\n  swift: \"\"\n};\nconst serviceFormInitialState = {\n  owner: \"\",\n  name: \"\",\n  webSite: \"\",\n  isProfessionalService: \"true\",\n  shortDescription: \"\",\n  longDescription: \"\",\n  currency: \"\",\n  priceLowerBound: \"\",\n  priceHigherBound: \"\",\n  canTravel: \"true\",\n  travelingRange: \"\",\n  allowOnline: \"false\",\n  boardNumber: \"\",\n  logoNormalSize: \"\",\n  logoSmallSize: \"\",\n  banner: \"\"\n};\nexport const Register = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    setUserData,\n    ...userRestValues\n  } = useContext(UserContext);\n  const {\n    values: userValues,\n    onChange: userOnChangeHandler,\n    hardSetValues: setUserValuesHard\n  } = useSimpleForm(extractUserFields(userRestValues, userFormInitialState));\n  const {\n    values: serviceValues,\n    onChange: serviceOnChangeHandler\n  } = useSimpleForm(serviceFormInitialState);\n  const [activeStep, setActiveStep] = useState(0);\n  const [isProvider, setIsProvider] = useState(false);\n  const {\n    postRequest,\n    putRequest\n  } = useApiRequest();\n  const steps = isProvider ? [RegisterOne, RegisterTwo, RegisterSix, RegisterThree, RegisterFourth, RegisterFive] : [RegisterOne, RegisterSeven];\n\n  const saveUser = () => {\n    const {\n      passwordConfirm,\n      ...user\n    } = userValues;\n    const userFormData = getFormDataFromObj(user);\n    putRequest(\"user\", userFormData).then(async ({\n      user: updatedUser\n    }) => {\n      if (isProvider) await saveService(updatedUser.id);\n      setUserData(updatedUser);\n      history.push(\"/\");\n    });\n  };\n\n  const saveService = async ownerId => {\n    const serviceFormData = getFormDataFromObj({ ...serviceValues,\n      ownerId\n    });\n    await postRequest(\"services\", serviceFormData).then(service => console.log(\"created service is: \", service)).catch(err => console.log(\"error: \", err));\n  };\n\n  const goNext = () => {\n    if (activeStep < steps.length - 1) setActiveStep(currentStep => currentStep + 1);\n  };\n\n  const goBack = () => {\n    if (activeStep !== 0) setActiveStep(currentStep => currentStep - 1);\n  };\n\n  const CurrentStep = steps[activeStep];\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 3,\n      md: 3,\n      className: classes.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 9,\n      md: 9,\n      component: Paper,\n      elevation: 6,\n      square: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          className: classes.logoBig,\n          children: \"Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Stepper, {\n            activeStep: activeStep,\n            children: steps.map((_, stepIndex) => /*#__PURE__*/_jsxDEV(Step, {\n              children: /*#__PURE__*/_jsxDEV(StepLabel, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this)\n            }, stepIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CurrentStep, {\n            goBack: goBack,\n            user: userValues,\n            onUserChange: userOnChangeHandler,\n            onServiceChange: serviceOnChangeHandler,\n            service: serviceValues,\n            isProvider: isProvider,\n            setIsProvider: setIsProvider,\n            setUserValuesHard: setUserValuesHard,\n            goNext: goNext\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login\",\n          children: [activeStep > 0 && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.loginButton,\n            onClick: goBack,\n            children: \"Anterior\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), activeStep < steps.length - 1 && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.loginButton,\n            onClick: goNext,\n            children: \"Siguiente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), activeStep === steps.length - 1 && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.loginButton,\n            onClick: saveUser,\n            children: \"Guardar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"8nc2dW4SSiuum1ifMHb85kKZXlY=\", false, function () {\n  return [useStyles, useHistory, useSimpleForm, useSimpleForm, useApiRequest];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/diego/Documents/myservice/src/components/organisms/register/index.js"],"names":["React","useState","useContext","useHistory","Button","Paper","Grid","makeStyles","Stepper","Step","StepLabel","RegisterOne","RegisterTwo","RegisterThree","RegisterFourth","RegisterFive","RegisterSix","RegisterSeven","useSimpleForm","useApiRequest","UserContext","getFormDataFromObj","extractUserFields","useStyles","theme","image","backgroundImage","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","logoBig","marginTop","marginBottom","color","loginButton","borderRadius","width","height","root","userFormInitialState","name","lastname","email","address","password","passwordConfirm","language","age","phone","phonePrefix","city","zipCode","avatar","bankName","bankAccount","swift","serviceFormInitialState","owner","webSite","isProfessionalService","shortDescription","longDescription","currency","priceLowerBound","priceHigherBound","canTravel","travelingRange","allowOnline","boardNumber","logoNormalSize","logoSmallSize","banner","Register","classes","history","setUserData","userRestValues","values","userValues","onChange","userOnChangeHandler","hardSetValues","setUserValuesHard","serviceValues","serviceOnChangeHandler","activeStep","setActiveStep","isProvider","setIsProvider","postRequest","putRequest","steps","saveUser","user","userFormData","then","updatedUser","saveService","id","push","ownerId","serviceFormData","service","console","log","catch","err","goNext","length","currentStep","goBack","CurrentStep","map","_","stepIndex"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  Button,\n  Paper,\n  Grid,\n  makeStyles,\n  Stepper,\n  Step,\n  StepLabel,\n} from \"@material-ui/core/\";\n\nimport { RegisterOne } from \"./First\";\nimport { RegisterTwo } from \"./Second\";\nimport { RegisterThree } from \"./Third\";\nimport { RegisterFourth } from \"./Fourth\";\nimport { RegisterFive } from \"./Five\";\nimport { RegisterSix } from \"./Six\";\nimport { RegisterSeven } from \"./Seven\";\nimport { useSimpleForm, useApiRequest } from \"../../../hooks\";\nimport { UserContext } from \"../../../context\";\nimport { getFormDataFromObj, extractUserFields } from \"../../../Utils\";\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\n    backgroundColor:\n      theme.palette.type === \"light\"\n        ? theme.palette.grey[50]\n        : theme.palette.grey[900],\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  logoBig: {\n    marginTop: 22,\n    marginBottom: 40,\n    backgroundColor: \"#DEDEDE\",\n    color: \"#FFFFFF\",\n  },\n  loginButton: {\n    backgroundColor: \"#4E5674\",\n    borderRadius: 10,\n    width: 150,\n    height: 50,\n  },\n  root: {\n    width: \"100%\",\n  },\n}));\n\nconst userFormInitialState = {\n  name: \"\",\n  lastname: \"\",\n  email: \"\",\n  address: \"\",\n  password: \"\",\n  passwordConfirm: \"\",\n  language: \"\",\n  age: \"\",\n  phone: \"\",\n  phonePrefix: \"\",\n  city: \"\",\n  zipCode: \"\",\n  avatar: \"\",\n  bankName: \"\",\n  bankAccount: \"\",\n  swift: \"\",\n};\n\nconst serviceFormInitialState = {\n  owner: \"\",\n  name: \"\",\n  webSite: \"\",\n  isProfessionalService: \"true\",\n  shortDescription: \"\",\n  longDescription: \"\",\n  currency: \"\",\n  priceLowerBound: \"\",\n  priceHigherBound: \"\",\n  canTravel: \"true\",\n  travelingRange: \"\",\n  allowOnline: \"false\",\n  boardNumber: \"\",\n  logoNormalSize: \"\",\n  logoSmallSize: \"\",\n  banner: \"\",\n};\n\nexport const Register = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const { setUserData, ...userRestValues } = useContext(UserContext);\n  const {\n    values: userValues,\n    onChange: userOnChangeHandler,\n    hardSetValues: setUserValuesHard,\n  } = useSimpleForm(extractUserFields(userRestValues, userFormInitialState));\n\n  const { values: serviceValues, onChange: serviceOnChangeHandler } =\n    useSimpleForm(serviceFormInitialState);\n\n  const [activeStep, setActiveStep] = useState(0);\n  const [isProvider, setIsProvider] = useState(false);\n  const { postRequest, putRequest } = useApiRequest();\n\n  const steps = isProvider\n    ? [\n        RegisterOne,\n        RegisterTwo,\n        RegisterSix,\n        RegisterThree,\n        RegisterFourth,\n        RegisterFive,\n      ]\n    : [RegisterOne, RegisterSeven];\n\n  const saveUser = () => {\n    const { passwordConfirm, ...user } = userValues;\n    const userFormData = getFormDataFromObj(user);\n    putRequest(\"user\", userFormData).then(async ({ user: updatedUser }) => {\n      if (isProvider) await saveService(updatedUser.id);\n      setUserData(updatedUser);\n      history.push(\"/\");\n    });\n  };\n\n  const saveService = async (ownerId) => {\n    const serviceFormData = getFormDataFromObj({ ...serviceValues, ownerId });\n    await postRequest(\"services\", serviceFormData)\n      .then((service) => console.log(\"created service is: \", service))\n      .catch((err) => console.log(\"error: \", err));\n  };\n\n  const goNext = () => {\n    if (activeStep < steps.length - 1)\n      setActiveStep((currentStep) => currentStep + 1);\n  };\n\n  const goBack = () => {\n    if (activeStep !== 0) setActiveStep((currentStep) => currentStep - 1);\n  };\n\n  const CurrentStep = steps[activeStep];\n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <Grid item xs={false} sm={3} md={3} className={classes.image} />\n      <Grid item xs={12} sm={9} md={9} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <Button variant=\"contained\" className={classes.logoBig}>\n            Logo\n          </Button>\n          <div>\n            <Stepper activeStep={activeStep}>\n              {steps.map((_, stepIndex) => (\n                <Step key={stepIndex}>\n                  <StepLabel />\n                </Step>\n              ))}\n            </Stepper>\n            <CurrentStep\n              goBack={goBack}\n              user={userValues}\n              onUserChange={userOnChangeHandler}\n              onServiceChange={serviceOnChangeHandler}\n              service={serviceValues}\n              isProvider={isProvider}\n              setIsProvider={setIsProvider}\n              setUserValuesHard={setUserValuesHard}\n              goNext={goNext}\n            />\n          </div>\n          <div className=\"login\">\n            {activeStep > 0 && (\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.loginButton}\n                onClick={goBack}\n              >\n                Anterior\n              </Button>\n            )}\n            {activeStep < steps.length - 1 && (\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.loginButton}\n                onClick={goNext}\n              >\n                Siguiente\n              </Button>\n            )}\n            {activeStep === steps.length - 1 && (\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.loginButton}\n                onClick={saveUser}\n              >\n                Guardar\n              </Button>\n            )}\n          </div>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}